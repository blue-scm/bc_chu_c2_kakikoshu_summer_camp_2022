!function(e){function a(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var t={};a.m=e,a.c=t,a.p="",a(0)}([function(e,a,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=t(1),s=n(i),r=t(2),o=n(r),c=t(3),d=n(c);new s.default,new o.default,new d.default},function(e,a){"use strict";function t(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),i=function(){function e(){t(this,e),this.window=$(window),this.$contentInner=$(".l-content__inner"),this.data=JSON.parse(localStorage.getItem("chu5_summer_camp")),this.data||(this.data={recommendDate:["2019/7/22","2019/7/23","2019/7/24","2019/7/27","2019/7/29","2019/7/30","2019/7/31","2019/8/3"],settingDate:[],state:{already:0},trump:{date:new Date,count:0},number:{date:new Date,count:0}},localStorage.setItem("chu5_summer_camp",JSON.stringify(this.data))),this.init()}return n(e,[{key:"init",value:function(){this.loading(),this.guide(),this.modal(),this.calendar(),this.nav(),this.uliza()}},{key:"loading",value:function(){var e=this;e.window.on("load",function(){e.$contentInner.removeClass("-loading")})}},{key:"guide",value:function(){var e=this,a=$("#js-guide-tap"),t=a.find(".guide__close"),n=$("#js-guide-calendar"),i=n.find(".guide__close"),s=$("#js-guide-answer"),r=s.find(".guide__close"),o=$("#js-answer-open");0==e.data.state.guideTap&&a.remove(),t.on("click",function(){e.data.state.guideTap=!1,a.removeClass("-active"),localStorage.setItem("chu5_summer_camp",JSON.stringify(e.data))}),i.on("click",function(){n.removeClass("-active")}),r.on("click",function(){s.removeClass("-active")}),o.on("click",function(){s.addClass("-active")})}},{key:"modal",value:function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.css({transform:"translateX("+u*f+"px)",transition:"transform "+e/1e3+"s"}),(1<f||a.data.state.calendar)&&i.addClass("-active")}var a=this,t=$("#js-modal"),n=t.find(".modal__inner"),i=t.find(".modal__close"),s=$(".js-modal-open"),r=$("#js-opening"),o=r.find(".opening__txt"),c=r.find(".opening__register"),d=t.find(".calendar__decision"),l=$("#js-slider").find("[class^=top__slider]"),u=-t.width(),f=0;a.data.state.calendar&&(t.removeClass("-active"),a.window.on("load",function(){l.addClass("-display")})),i.on("click",function(){t.css("transition","all 0.5s").removeClass("-active"),l.addClass("-display")}),s.on("click",function(){var a=$(this);f=a.attr("href").slice(1),t.css("transition","all 0.5s").addClass("-active"),o.add(c).remove(),e()}),c.add(d).on("click",function(){a.data.state.calendar?t.css("transition","all 0.5s").removeClass("-active"):(f++,e(500))})}},{key:"calendar",value:function(){function e(){c.add(d).removeClass("-active"),c.eq(g).addClass("-active"),d.eq(g).addClass("-active")}function a(e,a){!e.attr("data-day")&&8>y&&(y++,e.addClass(a).attr("data-day",y).append('<em class="calendar__ico">DAY<br><span>'+y+'</span></em><span class="calendar__speech">'+(y+1)+"日目を<br>設定しよう!</span>"),e.prevAll().addClass("-disable").find(".calendar__speech").remove(),p.addClass("-active")),7<y&&(e.find(".calendar__speech").html("決定ボタン<br>を押そう!"),h.addClass("-active"))}function t(e){e.each(function(){var e=$(this),a=e.attr("data-day");a&&e.addClass("-active").find(".calendar__ico").css("animation-delay",.25*a+"s")})}function n(e){i.data.state.calendar=e,"setting"==e&&(i.data.settingDate=[],m.each(function(){var e=$(this),a=e.attr("data-day"),t=e.attr("data-date");a&&i.data.settingDate.push(t)})),localStorage.setItem("chu5_summer_camp",JSON.stringify(i.data))}var i=this,s=$(".js-modal-open"),r=$("#js-opening").find(".opening__register"),o=$("#js-calendar"),c=o.find(".calendar__tab"),d=o.find(".calendar__cont"),l=o.find(".calendar__cont.-recommend"),u=l.find(".calendar__date"),f=l.find(".calendar__decision"),v=o.find(".calendar__cont.-setting"),m=v.find(".calendar__date"),p=v.find(".calendar__back"),h=v.find(".calendar__decision"),_=0,g=0,y=0;i.data.settingDate&&m.each(function(){var e=$(this);i.data.settingDate[y]==e.attr("data-date")&&a(e,"-disable")}),s.on("click",function(){var a=$(this);_=a.attr("href").slice(1),"recommend"==i.data.state.calendar?g=0:"setting"==i.data.state.calendar&&(g=1),e(),1==_&&t(u.add(m))}),r.on("click",function(){t(u)}),c.on("click",function(){var a=$(this);g=a.index(),e()}),f.on("click",function(){n("recommend")}),m.on("click",function(){var e=$(this);v.removeClass("-duration"),a(e,"-active -disable")}),p.on("click",function(){if(y--,v.removeClass("-duration"),1>y)m.removeClass("-active -disable").removeAttr("data-day").find(".calendar__ico, .calendar__speech").remove(),p.removeClass("-active");else{var e=v.find("[data-day="+y+"]");e.append('<em class="calendar__speech">'+(y+1)+"日目を<br>設定しよう!</em>"),e.nextAll().removeClass("-active -disable").removeAttr("data-day").find(".calendar__ico, .calendar__speech").remove()}8>y&&h.removeClass("-active")}),h.on("click",function(){n("setting")})}},{key:"nav",value:function(){function e(){s.each(function(e){var t=$(this),i=t.find("time");"recommend"==n.data.state.calendar?l=n.data.recommendDate[e]:"setting"==n.data.state.calendar&&(l=n.data.settingDate[e]),i.text(a(l)),l=new Date(l+" "+u).getTime(),d>l&&t.addClass("-active"),n.data.state.already>e&&t.addClass("-already")})}function a(e){var a="MM月DD日";return a=a.replace(/MM/g,new Date(e).getMonth()+1),a=a.replace(/DD/g,new Date(e).getDate())}function t(){BAEC.ApiClient.setAkamaiToken({complete:function(e){if(e.error)return console.log("Akamaiトークンの設定に失敗しました。"),void console.log(e.error);BAEC.ApiClient.getAvatarNickname({complete:function(e){if(e.error)return console.log("アバター・ニックネームの取得に失敗しました。"),void console.log(e.error);var a=e.data.nickname,t=e.data.avatar;if(t){console.log(t);t=BAEC.ApiClient.getAkamaiBaseUrl()+t.mainImageUrl}var i='<span class="user"><span class="avatar"><img src="'+t+'"></span><span class="name">'+a+"</span></span>";s.eq(n.data.state.already).hasClass("-active")?s.eq(n.data.state.already).append(i):s.eq(n.data.state.already-1).append(i)}})}})}var n=this,i=$("#js-nav"),s=i.find(".js-nav-item"),r=i.find(".top__slider__omake"),o=$("#js-guide-calendar"),c=$("#js-calendar").find(".calendar__decision"),d=(new Date).getTime(),l="",u="00:00:00",f=new Date("2019/8/7 "+u).getTime();n.$contentInner.hasClass("top")&&f<d&&7<n.data.state.already&&r.addClass("-active"),e(),t(),s.on("click",function(e){var a=$(this);(!a.hasClass("-active")||n.data.state.already<s.index(a))&&e.preventDefault(),a.hasClass("-active")||a.is(r)||o.addClass("-active")}),c.on("click",function(){s.removeClass("-active").find(".user").remove(),e(),t()})}},{key:"uliza",value:function(){var e=$("#js-uliza"),a=e.find(".uliza__close");$(".js-uliza-open").on("click",function(){var a=$(this).attr("data-path"),t='<iframe src="'+a+'" frameborder="0" width="782" height="440" allowfullscreen></iframe>';e.prepend(t).addClass("-active")}),a.on("click",function(){e.removeClass("-active").find("iframe").remove()})}}]),e}();a.default=i},function(e,a){"use strict";function t(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),i=function(){function e(){t(this,e),this.$contentInner=$(".l-content__inner"),this.init()}return n(e,[{key:"init",value:function(){this.$contentInner.hasClass("top")&&(this.data=JSON.parse(localStorage.getItem("chu5_summer_camp")),this.slider(),this.footer())}},{key:"slider",value:function(){function e(e,t){5<g?y=3:3<g?y=2:1<g&&(y=1),a(e,t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.css({transform:"translateX("+_*y+"px)",transition:"transform "+e/1e3+"s "+a/1e3+"s"}),c.add(d).addClass("-active"),1>y&&c.removeClass("-active"),h-1<y&&d.removeClass("-active")}function t(e){return e.originalEvent.touches[0].clientX}var n=this,i=$(window),s=$("#js-slider"),r=s.find(".top__slider__inner"),o=r.find(".top__slider__btn"),c=s.find(".-prev"),d=s.find(".-next"),l=$("#js-calendar").find(".calendar__decision"),u=0,f="",v=s.width(),m=r.width(),p=v-m,h=3,_=p/h,g=0,y=0;g=o.eq(n.data.state.already).hasClass("-active")?n.data.state.already:n.data.state.already-1,i.on("load",function(){e(1500,500)}),l.on("click",function(){e(1500,500)}),r.on("touchstart",function(e){u=t(e),f=""}),r.on("touchmove",function(e){var a=t(e)-u,n=_*y+a;0>n&&p<n&&(r.css({transform:"translateX("+n+"px)",transition:"none"}),Math.abs(_/5)<a?f="right":_/5>a&&(f="left"))}),r.on("touchend",function(){"right"==f?y--:"left"==f&&y++,a()}),c.on("click",function(){y--,a()}),d.on("click",function(){y++,a()})}},{key:"footer",value:function(){var e=$("#js-footer"),a=e.find(".-submission dd"),t=e.find(".-correct dd"),n=a.attr("data-target"),i=BAEC.ApiClient.getMemberIDFromCookie();$.post("https://blog.benesse.ne.jp/chu5/hanabi2019/counter/get.php",{path:"db/counter.db",name:n},function(e){var e=JSON.parse(e),t="";""==e&&(e[n]=0),("000000"+e[n]).slice(-6).split("").forEach(function(e){t+="<span>"+e+"</span>"}),a.html(t)}),BAEC.ApiClient.getMemberInfo({complete:function(e){if(e.error)return console.log("会員情報の取得に失敗しました。"),void console.log(e.error);var a=new BAEC.ApiClient;a.addRequest("learningHistory.achievementTable3.get",{memberID:i,line:e.data.line,schoolYearCode:e.data.gakunen,yearMonthNo:"201908"}),a.callApi(function(e,a){var n=e.result.AchievementTableThirdInformation.perfectAnswerLessonTotalNumber,i="";("00"+n).slice(-2).split("").forEach(function(e){i+="<span>"+e+"</span>"}),t.html(i)},function(e,a,t){console.log(e)})}})}}]),e}();a.default=i},function(e,a){"use strict";function t(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),i=function(){function e(){t(this,e),this.$contentInner=$(".l-content__inner"),this.init()}return n(e,[{key:"init",value:function(){this.$contentInner.hasClass("lower")&&(this.data=JSON.parse(localStorage.getItem("chu5_summer_camp")),this.day=this.$contentInner.attr("class").slice(-1),this.header(),this.work())}},{key:"header",value:function(){var e=this,a=$("#js-header"),t=a.find("em"),n=a.find("time"),i=a.find(".lower__header__list"),s=i.find(".lower__header__item"),r="";t.html("DAY<span>"+e.day+"</span>"),"recommend"==e.data.state.calendar?r=e.data.recommendDate[e.day-1]:"setting"==e.data.state.calendar&&(r=e.data.settingDate[e.day-1]),n.text(function(e){var a="MM月DD日";return a=a.replace(/MM/g,new Date(e).getMonth()+1),a=a.replace(/DD/g,new Date(e).getDate())}(r)),5>s.length&&i.addClass("-col2")}},{key:"work",value:function(){function e(){var e=s.attr("data-target");$.post("counter/get.php",{path:"db/counter.db",name:e},function(a){var a=JSON.parse(a),t="";""==a&&(a[e]=0),("00000"+a[e]).slice(-5).split("").forEach(function(e){t+="<span>"+e+"</span>"}),s.html(t)})}var a=this,t=$("#js-work"),n=t.find(".lower__right__btn"),i=t.find("em"),s=t.find("dd"),r=$("#js-nav").find(".js-nav-item"),o=window.navigator.userAgent;i.html("DAY<span>"+a.day+"</span>"),e(),a.data.state.already>a.day-1&&n.removeClass("-active"),n.on("click",function(){var t=$(this),n=t.attr("data-target");t.css("transition","opacity 0.25s").removeClass("-active"),r.eq(a.data.state.already).addClass("-already"),a.data.state.already++,localStorage.setItem("chu5_summer_camp",JSON.stringify(a.data)),$.post("counter/countup.php",{path:"db/counter.db",name:n,num:1}),e(),setTimeout(function(){-1!=o.indexOf("BenesseBrowser")?BenesseBrowserView.transitionHome():location.href="https://d.benesse.ne.jp/zemi/top"},500)})}}]),e}();a.default=i}]);